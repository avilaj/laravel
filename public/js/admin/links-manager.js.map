{"version":3,"names":[],"mappings":"","sources":["links-manager.js"],"sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar LinksManager = function LinksManager() {\n  var urls_input = $('input[name=urls]');\n  var form = $('form.links-manager');\n  var urls_data = urls_input.val();\n  var data = JSON.parse(urls_data || '{}');\n\n  var createButton = function createButton() {\n    var a = '<a href=\"#\"> <i class=\"fa fa-link\"></i> enlace </a>';\n    a = $(a);\n    return a;\n  };\n\n  var syncJson = function syncJson(json_field, data) {\n    var json = JSON.stringify(data);\n    urls_input.val(json);\n  };\n\n  var update = function update(key, value) {\n    data[key] = value;\n  };\n\n  var addUrlInput = function addUrlInput(item) {\n    var img = $(item).find('img');\n    var dataset = img.data();\n    var input = $('<input type=\"url\" placeholder=\"http://\" />').css('width', '100%');\n    var key = dataset.value;\n    var value = data[key];\n    input.val(value);\n\n    input.on('change', function (e) {\n      update(key, input.val());\n      syncJson(urls_input, data);\n    });\n\n    img.after(input);\n  };\n\n  form.find('.imageThumbnail').each(function (i, item) {\n    addUrlInput(item);\n  });\n\n  form.on('DOMNodeRemoved', function (event) {\n    var item = $(event.target);\n    if (item.is('.imageThumbnail')) {\n      var img = item.find('img');\n      var key = img.data().value;\n      if (key) {\n        data[key] = undefined;\n      }\n      syncJson(urls_input, data);\n    }\n  });\n\n  form.on('DOMNodeInserted', function (event) {\n    var item = $(event.target);\n    if (item.is('.imageThumbnail')) {\n      addUrlInput(item);\n    }\n  });\n};\n\n$(document).ready(function () {\n  new LinksManager();\n});\n\nexports.default = LinksManager;\n\n},{}]},{},[1]);\n"],"file":"links-manager.js","sourceRoot":"/source/"}