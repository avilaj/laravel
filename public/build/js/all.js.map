{"version":3,"sources":["app.js"],"names":[],"mappings":"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","file":"all.js","sourcesContent":["$(document).ready( ()=> {\r\n  let Slider = (selector, responsive) => {\r\n    let element = $(selector);\r\n    element.owlCarousel({\r\n      margin: 10,\r\n      nav: true,\r\n      navClass: ['owl-prev fa fa-angle-left', 'owl-next fa fa-angle-right'],\r\n      navText: false,\r\n      loop: true,\r\n      responsive: responsive\r\n    });\r\n  }\r\n\r\n  Slider(\"#news-slider\", {\r\n    0:{items: 2},\r\n    1000: {items: 4}\r\n  });\r\n\r\n  Slider(\".home-product-slider\", {\r\n    0: { items: 1 },\r\n    600: { items: 3 },\r\n    1000: { items: 5 }\r\n  });\r\n\r\n  var productThumbnails = $('.product-displayer__thumbnails');\r\n  productThumbnails.owlCarousel({\r\n    margin: 10,\r\n    nav: true,\r\n    navClass: ['owl-prev fa fa-angle-left', 'owl-next fa fa-angle-right'],\r\n    navText: false,\r\n    auto: false\r\n  });\r\n\r\n  let createImage = (src) => {\r\n    return $('<img src='+src+'>');\r\n  };\r\n\r\n  let setZoom = (medium, large) =>  {\r\n    let container = $('.product-displayer__view');\r\n    container.trigger('zoom.destroy');\r\n    container.html('');\r\n    container.append(createImage(medium));\r\n    container.zoom({\r\n      url: large\r\n    });\r\n  };\r\n\r\n  let productDisplayerThumbnails = $('.product-displayer__thumbnails');\r\n  productDisplayerThumbnails.on('click', 'img', (ev) => {\r\n    setZoom(ev.target.dataset.medium, ev.target.dataset.large);\r\n  });\r\n  $('.product-displayer__thumbnails img').first().trigger('click');\r\n});\r\n\r\n// class Bag {\r\n//\r\n//   constructor(products) {\r\n//     this.selected = [] || products;\r\n//   }\r\n//\r\n//   set(product, amount) {\r\n//     let selected = {\r\n//       id: product.id,\r\n//       product: product,\r\n//       qty: amount\r\n//     }\r\n//     this.selected.push(selected);\r\n//     return this.selected;\r\n//   }\r\n//\r\n//   remove(product) {\r\n//\r\n//   }\r\n// }\r\n//\r\n//   var cart = {};\r\n//   var select = document.getElementById(\"product-size\");\r\n//   var qty = document.getElementById(\"product-qty\");\r\n//\r\n//   function addSizes (colorId) {\r\n//     var options = sizes;\r\n//     var selection = [];\r\n//     for (var i = 0; i < options.length; i++) {\r\n//       var ref = options[i]\r\n//       if (ref.color_id == colorId) {\r\n//         selection.push(ref);\r\n//       }\r\n//     }\r\n//     for (var i = 0; i < selection.length; i++) {\r\n//       var size = selection[i];\r\n//       var option = document.createElement(\"option\");\r\n//       option.value = size.id;\r\n//       var label = size.label;\r\n//       if (size.total == \"0\") {\r\n//         label += \" AGOTADO\";\r\n//         option.disabled = true;\r\n//       }\r\n//       option.innerText = label;\r\n//       select.appendChild(option);\r\n//     }\r\n//   }\r\n//\r\n//   function setColor(color) {\r\n//     $(select).html('');\r\n//     $(select).attr('value', '');\r\n//     $(select).append('<option> Seleccione su talle </option>')\r\n//     addSizes(color);\r\n//   }\r\n//\r\n//   function updateCartCount(total) {\r\n//     $(\".cart-product-count\").html(\"(\"+total+\")\");\r\n//   }\r\n//   function getCartCount() {\r\n//     return $(\".cart-product-count\").html();\r\n//   }\r\n//   $('.remove-product').click(function (e) {\r\n//     setProduct(e.target.dataset.id, 0);\r\n//   });\r\n//   $('.product-amount-input').change(function (e) {\r\n//     var product = e.target.dataset.id;\r\n//     var quantity = e.target.value;\r\n//     setProduct(product, quantity);\r\n//\r\n//   });\r\n//\r\n//   function setProduct(product, quantity) {\r\n//     $.get('/check-out/set', {'reference_id': product, 'qty': quantity}).done(function (data) {\r\n//       updateCartCount(data.products);\r\n//     });\r\n//   }\r\n//\r\n//   function addToCart() {\r\n//     var product = select.value;\r\n//     var quantity = qty.value;\r\n//     setProduct(product, quantity);\r\n//     // updateCartCount(data.prsetProductoducts);\r\n//   }\r\n//   $('input:radio[name=color]:first').click();\r\n//   // function addToCart() {}\r\n//\r\n// angular.module('filtering', [])\r\n//   .controller('filteringCtrl', ['$scope','$location', function ($scope, $location) {\r\n//     console.log($location);\r\n//     let defaults = {\r\n//       'price': '0-3000',\r\n//       'brand': null,\r\n//       'search': null\r\n//     };\r\n//     this.applyFilter = () => {\r\n//       let params = {};\r\n//       params.price = this.minprice + '-' + this.maxprice;\r\n//       params.brand = this.brand;\r\n//     }\r\n//     this.brand = null;\r\n//     this.minprice = 70;\r\n//     this.maxprice = 3000;\r\n//   }])\r\n//   .component('priceFilter', {\r\n//     template: ''\r\n//   });\r\n// import ProductController from './product.controller.js';\r\n\r\nangular\r\n  .module('mkcart', [])\r\n  .service('Product', ['$http', '$window', '$rootScope', function ($http, $window, $scope) {\r\n    this.count = $window.mkStore.productCount || 0;\r\n    $scope.$watch(function () {\r\n      return $window.mkStore.productCount;\r\n    }, (value) => this.count = value)\r\n    this.setCount = (amount) => {\r\n      $window.mkStore = $window.mkStore || {};\r\n      $window.mkStore.productCount = amount;\r\n      this.count = amount;\r\n    };\r\n    this.getCount = function () {\r\n      console.log('devuelve',this.count);\r\n      return this.count;\r\n    };\r\n    this.add = (id, size_id, qty) => {\r\n      let data = {'reference_id': id, 'size_id': size_id, 'qty': qty};\r\n      this.count += qty;\r\n      return $http.post('/cart/update', data)\r\n        .then((res) => {\r\n          return this.setCount(res.data.products)\r\n        });\r\n    }\r\n\r\n  }])\r\n  .controller('ProductController', ['$window', 'Product', function ($window, Product)  {\r\n    let sumTotal = function (anterior, actual) {\r\n      return anterior + parseInt(actual.total);\r\n    };\r\n\r\n    let isColor = function (color_id) {\r\n      return function (item) {\r\n        return item.color_id == color_id;\r\n      };\r\n    };\r\n\r\n    let checkUniqueSize = () => {\r\n      if (this.currentColor.uniqueSize) {\r\n        this.currentSize = this.currentColor.sizes[0];\r\n      }\r\n    };\r\n\r\n    this.onColorChange = () => {\r\n      checkUniqueSize();\r\n    }\r\n\r\n    this.available = (color_id) => {\r\n      let total = this.sizes\r\n        .filter(isColor(color_id))\r\n        .reduce(sumTotal, 0);\r\n        return total > 0;\r\n    };\r\n\r\n    this.getSizesCount = (color_id) => {\r\n      let sizes = this.sizes.filter(isColor(color_id));\r\n      return sizes.length;\r\n    };\r\n\r\n    this.addToCart = (reference, item, qty) => {\r\n      this.addingProduct = true;\r\n      Product.add(item.reference_id, item.size_id, qty)\r\n        .then((response) => {\r\n          this.addingProduct = false;\r\n        })\r\n    };\r\n\r\n    this.setColorProperties = (color) => {\r\n      color.sizes = this.sizes.filter(isColor(color.id));\r\n      color.outOfStock = color.sizes.reduce(sumTotal, 0) < 1;\r\n      color.uniqueSize = color.sizes.length === 1;\r\n      return color;\r\n    };\r\n\r\n    this.price = $window.mkStore.price;\r\n    this.sizes = $window.mkStore.sizes;\r\n    this.colors = $window.mkStore.colors.map(this.setColorProperties);\r\n    this.availableColors = this.colors.filter(item => !item.outOfStock);\r\n    this.currentColor = this.availableColors[0];\r\n    this.qty = 1;\r\n\r\n    checkUniqueSize();\r\n  }])\r\n  .controller('CartController', ['$window', 'Product', function ($window, Product) {\r\n    var self = this;\r\n    this.products = $window.cartProducts;\r\n    this.total = 0;\r\n\r\n    this.remove = (item, index) => {\r\n      self.products.splice(index, 1);\r\n      self.updateQty(item, 0);\r\n    };\r\n\r\n    this.updateQty = function (item, qty) {\r\n      self.updateTotal();\r\n      let reference_id = item.reference.id;\r\n      let size_id = item.size.id;\r\n      return Product.add(reference_id, size_id, qty)\r\n    };\r\n    let subtotal = (item) => item.price * item.qty\r\n    let sumar = (prev, cur) => prev + cur\r\n    this.updateTotal = () => {\r\n      self.total = 0;\r\n      self.total = self.products.map(subtotal).reduce(sumar, 0);\r\n      return self.total;\r\n    }\r\n    this.updateTotal();\r\n  }])\r\n  .controller('TotalController', ['Product', function (Product) {\r\n    var self = this;\r\n    this.cart = Product;\r\n  }])\r\n  .component('cartTotal', {\r\n    template: \"({{ cart.cart.total() }})\",\r\n    controller: \"TotalController\",\r\n    controllerAs: 'cart'\r\n  });\r\n\r\n  angular.bootstrap(document.querySelector('.cart-product-count'), ['mkcart']);\r\n  // angular.bootstrap(document.getElementById('filtering'), ['filtering']);\r\n"],"sourceRoot":"/source/"}